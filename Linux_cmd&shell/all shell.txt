注：以下命令在CENTOS7 上跑过，其他版本linux可能有细微差异

【虚拟机网络配置】：
桥接：占用真实ip，使用主机真实网卡。可以与同一局域网内所有设备机通信。
NAT：不占用真实ip，使用虚拟网卡。主机能访问互联网，虚拟机就能访问互联网。
（NAT无法查询ip时，虚拟机->编辑->虚拟网络编辑器->开启服务dhcp）
（vi /etc/sysconfig/network-scripts/ifcfg-ens33 将ONBOOT=no改为ONBOOT=yes )
（主机与虚拟机在同一网段时，要将虚拟机改到另外一个网段）
（执行systemctl restart network重启网络服务）
（使用dhclient）
Host-only：不占用真实ip，使用虚拟网卡。但虚拟机只能与主机通信。

【常识】：内核官网：www.kernel.org
#：root用户
$：普通用户
~：表示在此用户家目录下
命令行框头尾显示当前目录位置
NFS：网络文件系统，允许一个系统在网络上与他人共享目录和文件，用户和程序可以像访问本地文件一样访问远端系统上的文件

【文件操作】：
（查看目录文件的信息）
ls -a 目录路径（显示所有文件（包括隐藏文件））
   -l 目录路径（显示文件详细信息）
   -h 目录路径（文件大小人性化显示，一般-lh）
   -d 目录路径（显示目录本身信息，一般-ld）
   -i 目录路径（显示各文件id号）
ll 目录路径（相当于ls -l）

mkdir 目录路径（创建目录）
      -p 目录路径（递归创建目录）

touch 文件路径（创建文件）
若创建的文件名带空格，需用""括起来，如touch "my study"

rmdir 目录路径		      （删除空目录）
rm 文件路径                   （删除文件）
   -r 目录路径                （删除目录）   
   -f                         （删除时不确认）

cd 目录路径                   （切换到指定目录）
cd ..                         （返回到上一级目录）（.表示当前目录，*表示所有文件）
pwd                           （显示当前目录）

mv 原文件或目录路径 目标文件或目录路径（剪切文件，在剪切同时可更名(在目标文件或目录路径后写上新命名)）

cp 原文件路径 目标文件路径    （复制文件）
   -r 原目录路径 目标目录路径 （复制目录）
   -p                         （复制同时保留原文件属性，如原文件最后修改时间等）


【文件浏览】：
cat 文件路径                  （显示文件内容，一般用于显示小文件，tac倒着显示）
    -n 文件路径               （显示行号）

more 文件路径                 （分页显示文件内容）
（空格或f（翻页））
（回车   （换行））
（q      （退出））

less 文件路径                 （分页显示文件内容）
（快捷键与more相同）
（特殊：可支持用上箭头向上翻，可用/关键词进行搜索，按n，寻找下一个关键词）

head 文件名                   （显示文件前10行内容）
     -n                       （显示n行）

tail 文件名                   （显示文件末10行内容）
     -n                       （显示n行）
     -f                       （动态显示文件内容）
（ctrl+c退出）

grep "字符串" 文件路径           （搜索文件中指定字串）
     -i "字符串" 文件路径        （不区分大小写） 
grep -v ^# 文件路径              （去除该文件中行首为#的行，^#可换做其他字符）

file 文件名			（显示文件类型）
【软/硬链接】：
ln 原文件路径 目标文件路径.hard    （创建原文件的硬链接）
（硬链接i节点与原文件相同，不可以跨分区创建，其内容可同步更新）
ln -s 原文件路径 目标文件路径.soft （创建原文件的软链接）
（软链接相当于快捷方式，其属性为三个rwx）

----------------------------
【权限管理命令】：（掩码：r=4，w=2，x=1）
ls -l查看权限
chmod u/g/o/a +/-/= r/w/x 文件路径 （给所有者/所属组/其他人/所有人，增加/减少/不增减，读/写/执行/的权限，多个授权时用逗号分割）
      -R                           （递归修改）
（如，chmod u+x,g+w /tmp/test，给此文件所有者增加可执行权限，所属组增加可写权限）
chmod 要修改的rwx掩码 文件路径     （改变某个文件的权限）
      -R                           （递归修改）

chown 用户名 文件或目录路径        （改变某个文件或目录的所有者）
（如，chown root:group1 /home，将home目录的所有者和所属组改为root和group1）
chgrp 用户名 文件或目录路径        （改变某个文件或目录的所属组） 

umask -S（查看新建目录或文件默认的权限，新建文件时系统会自动去除x权限）

----------------------------
【文件/目录搜索命令】：
find 文件目录路径 -name 文件名    （在该目录中查找该名字的文件）
     文件目录路径 -name *文件名*  （在该目录中查找包含有该名字的文件）
     文件目录路径 -name 文件名*   （在该目录中查找以该名字开头的文件）
     文件目录路径 -name 文件名??? （在该目录中查找该名字开头的文件,且末尾还有三个字符，一个?对应一个字符）
     文件目录路径 -iname 文件名    (不区分大小写查找)

    （linux 1个数据块=512byte=0.5kb）
     文件目录路径 -size +/-数据块大小                        (查找大于/小于多少个数据块大小的文件)
     文件目录路径 -size +/-数据块大小 -a -size -/+数据块大小 (查找数据块大小在两者之间的文件)   
     文件目录路径 -size +/-数据块大小 -o -size +/-数据块大小 (查找数据块大小满足两者任意之一条件的文件)   

     文件目录路径 -user 所有者名 （查找所有者为...的文件）
     文件目录路径 -group 所属组名（查找所属组为...的文件）  

     文件目录路径 -amin -/+分钟  （查找访问时间小于/超过...分钟的文件）
     文件目录路径 -cmin -/+分钟  （查找文件属性在...分钟内/外被修改过的文件）
     文件目录路径 -mmin -/+分钟  （查找文件内容在...分钟内/外被修改过的文件）
     文件目录路径 -inum 节点号   （查找该节点文件）

     在以上所有命令后加-type fdl（查找符合该条件的文件/目录/软链接）
     在以上所有命令后加-exec/-ok 其他命令 {} \;  （查找到该文件并执行其他命令）(ok需要确定一次)

locate 文件名    （文件资料库中查找包含文件名的文件，不能查找/tmp目录下的文件）
       -i 文件名 （不区分大小写查找）
updatedb         （手动更新资料库）

whereis 命令（查找命令的路径及相关文件信息）

which 命令  （查找命令的路径及别名）

whatis 命令 （查看命令的简短信息）

man 命令或配置文件名（获取帮助信息，以1.结尾是命令帮助，以5.结尾是文件帮助，只能文件名）
    1 命令          （获取命令帮助信息）
    5 配置文件名    （获取配置文件帮助信息）

apropos 配置文件名  （查看配置文件的简短信息）

date                （查看系统时间）
date 月日时分年.秒  （修改系统时间）

help 内置命令（获取内置命令的帮助信息）
命令 --help  （获取命令帮助）
info 命令    （获取命令帮助）

who   （查看登陆用户简单信息：第一列已登陆的用户，第二列登陆终端(tty本地终端、pts远程终端)，登陆时间，登陆设备的ip）
w     （查看登陆用户详细信息：up 时间：设备开机使用时间，load average：服务器负载情况，WHAT：各用户使用的指令，IDLE：用户空闲时间，JCPU：用户使用时间）
uptime（只查看w第一行信息）

----------------------------
【压缩命令】：（所有解压都是解压到当前路径下）
gzip 文件名  （将文件压缩成.gz格式，不保留原文件）
gunzip 文件名（解压，也可以用gzip -d）

zip 压缩后的文件名 文件名   （压缩文件.zip，压缩会保留原文件）
    -r 压缩后的目录名 目录名（压缩目录）
unzip 文件名                （解压.zip）

bzip2 文件名           （压缩.bz2）
      -k 文件名        （压缩且保存原文件）
bunzip2 文件名         （解压.bz2）
        -k 文件名      （解压且保留原文件）

tar -cfv  文件名 目录名（将该目录打包成文件.tar）
tar -czfv 文件名 目录名（将该目录打包并压缩.tar.gz）
tar -xzfv 文件路径     （解压.tar.gz）

tar -cjfv 文件名 目录名（将该目录打包并压缩.tar.bz2）
tar -xjfv 文件名       （解压缩.tar.bz2）

--------------------------
【网络命令】：
write 用户名   （给用户发送消息）
（ctrl+d结束）

wall 消息      （发广播消息给所有用户，包括自己）

mail           （查看邮箱列表）
mail 用户名    （写电子邮件）
(N未读，输入序列号读取邮件，h返回邮件列表，d删除邮件，q退出)

ping ip地址    （测试网络通断以及网络延时）
     -c ip地址 （指定发送次数）
（ctrl+c退出）

traceroute 网站（显示数据包到此网站的路径节点,可以查看在哪个节点出了问题）

ifconfig                    （查看ip地址信息）
ifconfig 网卡文件名 新ip地址（设置暂时新的ip地址）

setup（网络配置，centos6特有指令,永久更改ip）
（或者修改vim /etc/sysconfig/network-scripts/ifcfg-网卡名）
service network restart     （重启网卡）

last           （列出所有登入过系统的用户信息）
lastlog        （查看用户上次登录时间）

netstat -tlun  （查看本机监听窗口）
        -an    （查看本机所有网络连接）
        -rn    （查看本机路由表）

【关机/重启命令】：
shutdown -h now（现在关机，now可以换成-> 小时:分钟，定时在几时几分关机）
shutdown -c （取消前一个关机命令）
shutdown -r now（重启）

其他关机命令：
halt
init 0
poweroff（慎用！！）

其他重启命令：
reboot
init 6

修改系统运行级别：
centos6：cat /etc/inittab（id:3:initdefault，修改数字3）
centos7：init 系统运行级别号
runlevel（第一个数表示上次运行级别，第二个表示当前运行级别）

logout（退出登录）
exit（退出shell）

---------------------------
【设备挂载】：
df -h                  （查看分区基本信息）
dumpe2fs -h 设备文件名 （查看uuid，/etc/fstab）
df -a 挂载目录（显示所有文件，包括特殊文件系统信息）（占用空间包含未释放的空间）
   -h 挂载目录（人性化显示）
   -T 挂载目录（显示文件系统类型）

du -sh 文件名 （自身文件大小，纯粹的占用空间）

fdisk -l      （查看磁盘设备文件名）
mkdir         （创建挂载点）

mount -a      （根据/etc/fstab中，自动挂载）
mount -l      （查看已经挂载的设备）
mount (-t 文件系统) 设备文件名 挂载点目录    （挂载外部设备，u盘等）
（括号内可省略）
如：mount (-t iso9660) /dev/sr0 /mnt/cdrom （一般插上u盘自动挂载）
umount (-t 文件系统) 设备文件名或者挂载点目录（解挂，解挂时必须先退出设备，unmount也可以）
mount -o remount,acl/  （暂时更改使其具有acl权限）

linux中对NTFS系统的支持包：
NTFS-3G：http://www.tuxera.com/community/ntfs-3g-download/

fdisk /dev/sdb         （分区，用交互式指令操作）
mkfs -t ext4 设备文件名（格式化此设备为ext4系统）
partprobe              （磁盘配置完成后，执行一次此命令来重新读取分区表信息）

---------------------------------
【vim/vi使用】：
vim 文件路径（进入命令模式）
:wq退出文件
按aio       （进入插入模式）
esc退出插入模式到命令模式
:           （进入编辑模式）
回车退出编辑模式到命令模式

:r 文件位置  （将此文件内容导入当前文件内）
:!命令       （在文件内执行该命令）
:r !命令     （将命令执行结果导入当前文件内）
:map 快捷键(ctrl+v+字母) 要触发的命令（设置命令组快捷键，如:map ^B 0x 删除行首光标字符）

连续行注释(n1,n2s/.../.../g)：
:set nu         （设置行号）
n1,n2s/^/字符/g （g不需要确认，^表示行首，将n1~n2行首插入字符）
n1,n2s/^/\/\//g （在行首插入//注释符号）
n1,n2s/^#//g    （去除行首#注释符号）

:ab mymail 1210267211@qq.com（将后面定义成前面,相当于宏）

写用户配置文件： (可以将快捷键写入到此文件可永久生效)
vim /root/.vimrc（root用户）
vim /home/.vimrc（普通用户）

------------------------------
【rpm包的命令管理】：（依赖性以.so结尾的包是模块，在www.rpmfind.net查询安装）
rpm -ivh 全包名（安装此包）
rpm -Uvh 全包名（升级此包）
rpm -e 包名    （卸载此包）

查询：
rpm -q  包名    （该包是否安装）
    -qa         （查询所有已安装包）
    -qi 包名    （查询已安装包的信息，-qip未安装包）
    -ql 包名    （查询已安装包中的文件和安装位置）
    -qf 文件路径（文件属于哪个已安装包）
（如，rpm -qf /bin/ls查询ls命令属于哪个软件包）
    -V  包名    （校验已安装包是否与发布的一致）
    -qR 包名    （查询已安装包依赖性，-qRp未安装包）
    
rpm2cpio 包全名 | cpio -idv.文件绝对路径（将该包文件提取到此路径目录下，.表示提取到当前目录。可以用来修复系统）

--------------------------------
【rpm包的yum在线管理】：
1、网络yum源（/etc/yum.repos.d/CentOS-Base.repo）
yum list（获取服务器上可用的软件包列表）
yum search 包名（搜索服务器上可用的软件包列表）

单安装：
yum -y install 包名 （安装）
yum -y update  包名 （升级）
yum -y remove  包名 （卸载，慎用，可能卸载掉其他包与此包公用的依赖包）

组安装：
yum grouplist    组名 （软件包组列表）
yum groupinstall 组名 （安装）
yum groupremove  组名 （卸载）

2、本地yum源(/etc/yum.repos.d/CentOS-Media.repo）
mount命令进行u盘挂载
cd /etc/yum.repos.d/
更改CentOS-Base.repo，CentOS-Debuginfo.repo，CentOS-Vault.repo后缀名（使用mv命令，让网络yum源失效）
修改vim CentOS-Media.repo（将第一个挂载点改为u盘挂载目录，注释下面俩个挂载点，enable=1，注意不可缩进空格等）


【源码包】：（下载：http://mirror.bit.edu.cn/apache/httpd）（脚本安装包调用makefile安装）
源代码保存位置： 
/usr/local/src/
安装位置一般:    
/usr/local/软件名/
安装步骤：
yum -y install gcc（安装gcc）
WinSCP复制源文件压缩包在虚拟机linux系统下（ls查看是否复制成功）
tar解压
cd进入解压包目录
ls查看包目录，查看安装说明
执行./configure --profix=/usr/local/软件名（指定安装目录，生成makefile）
make（调用gcc进行编译，出现错误使用make clean清除临时文件）
make install（进行真正安装）
卸载：
rm删除文件安装目录即可

安装服务启动方法：
服务绝对路径 start
或者service 服务名 start（redhat系列，不能开启源码包安装的服务）
打开浏览器访问主机ip即可访问此服务，可以找到网站目录，vim创建.html文件，可以书写自己要放在网站上的内容

Webmin：图形界面管理器，浏览器登陆ip即可进行管理
下载地址：http://sourceforge.net/projects/webadmin/files/webmin/
使用WinSCP复制此文件到linux系统文件里
cd到此安装包
./setup.sh（执行脚本安装）

-------------------------------
【配置文件管理】：
man 5 配置文件名（查看配置文件说明）

用户信息文件：
/etc/passwd
影子文件：（存放用户信息真实数据，密码等）  
/etc/shadow

组文件：
/etc/group
组密码文件：（存放组文件真实数据，密码等）
/etc/gshadow

时间戳->日期：date -d "1970-01-01 时间戳 days"
日期->时间戳：echo $(($(date --date="年/月/日" +%s)/86400+1))

用户家目录：/home/用户名（超级用户在/root下）
用户邮箱：  /var/spool/mail/用户名
用户模板：  /ect/skel/  （若在此目录下编辑一个vim文件保存，则有新用户创建时会出现在他的家目录下）
用户创建时默认值文件：/etc/default/useradd 和 /etc/login.defs

useradd 用户名（创建新用户）
passwd  用户名（设置用户密码）
       -S 用户名（查询密码状态）
       -l 用户名（上锁用户）
       -u 用户名（解锁）

echo "密码" | passwd --stdin 用户名（重置用户密码）
echo "内容" >> 文件（将内容写入到某个文件）

usermod -c "说明" 用户名（修改用户说明）
        -G 组名 用户名  （将用户加入该组）
	-L 用户名（上锁用户）
        -U 用户名（解锁）

chage -d 0 用户名（用户一登录强制修改密码）

userdel -r 用户名（删除用户及家目录）

su - 用户名（切换为此用户，可以env指令查看当前USER是谁来确认环境是否全部切换）
su - root -c "useradd 用户名"（以root身份创建一个新用户，不切换）

gpasswd -a 用户名 组名（加入组）
        -d 用户名 组名（踢出组）

----------------------------
【ACL权限】：
df -h                  （查看分区基本信息）
dumpe2fs -h 设备文件名 （查看该分区是否支持acl权限）
mount -o remount,acl/  （暂时更改使其具有acl权限）
修改/etc/fstab         （default后加:acl，再执行mount -o remount / 永久更改）

setfacl -m 文件名（设置acl权限）
        -x 文件名（删除指定acl权限）
        -b 文件名（删除所有acl权限）
        -d 文件名（设置默认acl权限）
        -k 文件名（删除默认acl权限）
        -R 文件名（递归设置acl权限）
setfacl -m u:用户名:rwx 文件目录（设置某个用户对此文件的权限，u可以换成g->用户组权限）
ll -d 文件目录（+表示此文件具有acl权限）
getfacl 文件名（查看文件是否具有acl权限）

【SetUID权限】：（文件，执行者必须对文件有执行权限，比如修改命令文件的suid权限，ll查看所有者权限显示有s，即表示有suid权限）
chmod 4755 文件名（设置，取消用755）
chmod u+s 文件名（设置，取消用u-s）
当使用具有suid权限的文件（命令）过程中，具有与此文件所有者一样的权限，慎用！！

【SetGID权限】：（文件或目录，执行者必须对文件或目录有执行权限，ll查看所属组权限显示有s）
chmod 2755 文件名（设置，取消用755）
chmod g+s 文件名（设置，取消用g-s）

【Sticky BIT权限】：（目录，执行者必须对目录有写和执行权限，ll查看权限显示有s，用户不能删除其他用户创建的文件，即使自己有权限）
chmod 1755 文件名（设置，取消用777）
chmod o+t 文件名（设置，取消用o-t）

【chattr权限】：（文件或目录，权限分配隐藏属性，对root同样生效）
chattr -i 文件目录（对文件不允许操作只能看，对目录只能对其下面文件进行操作不能删除和新建）
       -a 文件目录（对文件只能增加数据不能修改和删除，对目录只能对其下面文件进行修改和新建）

lsattr -a 文件名（显示文件隐藏属性）
       -d 文件名（本身属性）

【sudo权限】:（系统命令，将root才能执行的命令赋予普通用户）
sudo -l      （查看被root赋予了哪些权限）
用whereis 命令（查看命令路径）
visudo 用户名 ALL=/命令绝对路径（赋予用户在本网段使用此命令，ALL可改成本机ip，此ip是被访问的ip）
（如，visudo gj ALL=/sbin/shutdown -h now，等效于修改/etc/sudoers文件）

用户被root赋予的特殊权限执行格式：
sudo 命令绝对路径

------------------------------------------

【服务管理】：（注意区分工作号和进程号）
chkconfig --list（rpm包安装的服务自启状态）

服务绝对路径 start/stop/status/restart（服务启之类...）

服务自启动文件：/etc/rc.d/rc.local
（将服务启动方式写入，就可开机自启）

ps aux | grep ""（查看所有进程）

top -d 秒数（查看系统健康信息，几秒刷新一次）
（ctrl+z后台运行）
（ctrl+c结束）

kill -1 进程号（注意是数字1，重启进程）
kill 进程号（正常结束进程）
kill -9 进程号（强制杀死进程）

执行命令 &          （加&，将进程放入后台）（在后台执行）
执行命令后，按ctrl+z（将进程放入后台）     （暂停放在后台）

jobs -l（查看后台，且显示工作号）
fg %工作号（后台工作恢复在前台执行,%可省略）
bg %工作号（后台工作恢复在后台执行,%可省略）

vmstat 秒数 次数（系统资源信息查看，以多少秒刷新几次）

备份与恢复：dump restore



【ubuntu】：
ubuntu下不存在用root登陆，任何指令前加sudo就可执行
apt-get install 软件名     （下载安装)
	remove  软件名     （卸载）
        upgrade 软件名     （更新）




